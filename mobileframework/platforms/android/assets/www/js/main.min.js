function onSuccess(e){var t=Math.floor(Math.random()*e.length),n=e[t].displayName;document.getElementById("randomcontact").innerHTML="Ah, I see you have chosen <strong>"+n+"</strong> for me to kill. Excellent choice!"}function onError(){alert("Failed to get contact")}function reportPosition(e){var t=(document.querySelector("#output"),e.coords.latitude),n=e.coords.longitude,o=document.createElement("canvas"),a=document.createElement("div");a.setAttribute("id","output"),o.setAttribute("width",250),o.setAttribute("height",250);var r=o.getContext("2d"),i="https://maps.googleapis.com/maps/api/staticmap?zoom=14&size=250x250&markers=color:blue|"+t+","+n+"&key=AIzaSyA8BTwbN0s9UfefqLk9vs32OSNJQz22Iag";document.getElementById("map").appendChild(o),document.getElementById("map").appendChild(a);var c=document.createElement("img");c.onload=function(){r.drawImage(c,0,0)},c.src=i}function gpsError(e){var t={1:"Permission denied",2:"Position unavailable",3:"Request timeout"};alert("Error: "+t[e.code])}function handleTouch(e){e.preventDefault(),e.stopImmediatePropagation();var t=evt.changedTouches[0],n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,t.screenX,t.screenY,t.clientX,t.clientY),e.currentTarget.dispatchEvent(n)}function handleNav(e){e.preventDefault();var t=e.target.href,n=t.split("#");return loadPage(n[1]),!1}function loadPage(e){if(null==e)pages[0].className="active",history.replaceState(null,null,"#home");else{for(var t=0;numPages>t;t++)pages[t].id==e?(pages[t].className="active",history.pushState(null,null,"#"+e)):pages[t].className="";for(var n=0;numLinks>n;n++)links[n].className="",links[n].href==location.href&&(links[n].className="activetab")}}function detectTouchSupport(){msGesture=navigator&&navigator.msPointerEnabled&&navigator.msMaxTouchPoints>0&&MSGesture;var e="ontouchstart"in window||msGesture||window.DocumentTouch&&document instanceof DocumentTouch;return e}document.addEventListener("DOMContentLoaded",function(){function e(){if(navigator.geolocation){var e={enableHighAccuracy:!0,timeout:5e3,maximumAge:6e4};navigator.geolocation.getCurrentPosition(reportPosition,gpsError,e)}else alert("You've eluded me. For now.");var t=new ContactFindOptions;t.filter="",t.multiple=!0;var n=["displayName"];navigator.contacts.find(n,onSuccess,onError,t)}document.addEventListener("deviceready",e)});var pages=[],links=[],numLinks=0,numPages=0;document.addEventListener("DOMContentLoaded",function(){pages=document.querySelectorAll('[data-role="page"]'),numPages=pages.length,links=document.querySelectorAll('[data-role="pagelink"]'),numLinks=links.length;for(var e=0;numLinks>e;e++)detectTouchSupport()&&links[e].addEventListener("touchend",handleTouch,!1),links[e].addEventListener("click",handleNav,!1)});